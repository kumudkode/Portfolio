<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <title>Projects | Kumud Ranjan</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/favicon/favicon.ico" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="assets/favicon/favicon-16x16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="assets/favicon/apple-touch-icon.png"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@300;400;500;600&family=Space+Mono&family=Syne:wght@400;500;600;700;800&family=Outfit:wght@300;400;500;600;700&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />
    <!-- Animation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="assets/styles.css" />
  </head>
  <body>
    <!-- Audio Elements -->
    <audio id="click-sound" src="assets/audio/click.mp3" preload="auto"></audio>
    <audio
      id="connect-sound"
      src="assets/audio/connect.mp3"
      preload="auto"
    ></audio>
    <audio
      id="project-sound"
      src="assets/audio/project.mp3"
      preload="auto"
    ></audio>
    <audio
      id="effect-sound"
      src="assets/audio/effect.mp3"
      preload="auto"
    ></audio>
    <audio id="moon-sound" src="assets/audio/moon.mp3" preload="auto"></audio>
    <audio
      id="interface-sound"
      src="assets/audio/interface-1244645.mp3"
      preload="auto"
    ></audio>
    <audio
      id="hover-sound"
      src="assets/audio/ui-6-sound-effect-modern-smooth-fade-out-stereo-332452.mp3"
      preload="auto"
    ></audio>

    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div class="noise-overlay" aria-hidden="true"></div>
    <div id="cursor-blob" aria-hidden="true"></div>
    <div id="cursor-ring" aria-hidden="true"></div>

    <!-- Navigation -->
    <nav
      class="fixed top-0 w-full px-4 sm:px-6 md:px-12 py-4 sm:py-5 flex justify-between items-center z-[100] mix-blend-difference"
      role="navigation"
      aria-label="Main navigation"
    >
      <a
        href="index.html"
        class="flex items-center gap-1 select-none cursor-pointer"
        aria-label="Kumud Kode - Home"
      >
        <span
          class="text-white text-base sm:text-lg md:text-xl tracking-normal"
          style="font-family: 'Lora', serif"
          >Kumud</span
        >
        <span
          id="cycle-logo"
          class="logo-word text-white text-base sm:text-lg md:text-xl tracking-normal"
          style="font-family: 'Lora', serif"
          >Kode</span
        >
      </a>
      <div class="flex items-center gap-3 sm:gap-6 md:gap-8" role="menubar">
        <a
          href="index.html#about"
          class="text-white text-xs sm:text-sm tracking-wide hover:opacity-60 transition-all duration-300 hidden sm:inline"
          style="font-family: 'Lora', serif"
          role="menuitem"
          >About</a
        >
        <a
          href="services.html"
          class="text-white text-xs sm:text-sm tracking-wide hover:opacity-60 transition-all duration-300"
          style="font-family: 'Lora', serif"
          role="menuitem"
          >Services</a
        >
        <a
          href="projects.html"
          class="text-white text-xs sm:text-sm tracking-wide opacity-100 border-b border-white"
          style="font-family: 'Lora', serif"
          role="menuitem"
          aria-current="page"
          >Projects</a
        >
        <a
          href="index.html#contact"
          class="text-white text-xs sm:text-sm tracking-wide hover:opacity-60 transition-all duration-300"
          style="font-family: 'Lora', serif"
          role="menuitem"
          >Contact</a
        >
        <button
          class="theme-toggle flex-shrink-0"
          onclick="toggleTheme()"
          aria-label="Toggle dark and light theme"
          aria-pressed="false"
          type="button"
          tabindex="0"
        >
          <!-- Sun Icon -->
          <svg
            class="sun-icon"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle cx="12" cy="12" r="5" />
            <line
              x1="12"
              y1="1"
              x2="12"
              y2="3"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
            <line
              x1="12"
              y1="21"
              x2="12"
              y2="23"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
            <line
              x1="4.22"
              y1="4.22"
              x2="5.64"
              y2="5.64"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
            <line
              x1="18.36"
              y1="18.36"
              x2="19.78"
              y2="19.78"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
            <line
              x1="1"
              y1="12"
              x2="3"
              y2="12"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
            <line
              x1="21"
              y1="12"
              x2="23"
              y2="12"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
            <line
              x1="4.22"
              y1="19.78"
              x2="5.64"
              y2="18.36"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
            <line
              x1="18.36"
              y1="5.64"
              x2="19.78"
              y2="4.22"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
          <!-- Moon Icon -->
          <svg
            class="moon-icon"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
          <span class="sr-only">Toggle theme</span>
        </button>
        <button
          class="sound-toggle flex-shrink-0"
          onclick="toggleSound()"
          aria-label="Toggle sound"
          type="button"
          tabindex="0"
        >
          <svg
            class="sound-on"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 010 7.07M19.07 4.93a10 10 0 010 14.14"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              fill="none"
            />
          </svg>
          <svg
            class="sound-off"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11 5L6 9H2v6h4l5 4V5zM23 9l-6 6M17 9l6 6"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              fill="none"
            />
          </svg>
          <span class="sr-only">Toggle sound</span>
        </button>
      </div>
    </nav>

    <main id="main-content" role="main" tabindex="-1">
      <!-- Projects Hero -->
      <section
        class="min-h-[40vh] flex flex-col justify-center px-4 sm:px-6 md:px-16 pt-24 sm:pt-28 pb-8 sm:pb-12"
        aria-label="Projects overview"
      >
        <div class="max-w-[1400px] w-full mx-auto">
          <h1
            class="text-4xl sm:text-6xl md:text-8xl serif italic tracking-tighter mb-4"
          >
            All Projects
          </h1>
          <p class="text-base sm:text-lg opacity-60 max-w-2xl">
            A comprehensive collection of my work in full-stack development,
            cloud architecture, and interactive web applications.
          </p>
        </div>
      </section>

      <!-- Filter/Category Tabs -->
      <section class="px-4 sm:px-6 md:px-16 pb-8">
        <div class="max-w-[1400px] mx-auto">
          <div class="flex flex-wrap gap-3">
            <button class="filter-btn active" data-filter="all">
              All Projects
            </button>
            <button class="filter-btn" data-filter="fullstack">
              Full Stack
            </button>
            <button class="filter-btn" data-filter="frontend">Frontend</button>
            <button class="filter-btn" data-filter="cloud">
              Cloud & DevOps
            </button>
            <button class="filter-btn" data-filter="algorithm">
              Algorithms
            </button>
          </div>
        </div>
      </section>

      <!-- Projects Grid - Dynamically loaded from data/projects.json -->
      <section class="py-8 px-4 sm:px-6 md:px-16" aria-label="All projects">
        <div class="max-w-[1400px] mx-auto">
          <!-- Dynamic projects will be loaded here -->
          <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Loading state -->
            <div class="col-span-full text-center py-12 opacity-50">
              <p class="mono text-sm">Loading projects...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer
        id="contact"
        class="py-16 sm:py-20 px-4 sm:px-6 md:px-16 border-t border-black/10"
        role="contentinfo"
      >
        <div class="max-w-[1400px] mx-auto">
          <div
            class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 text-left"
          >
            <div>
              <div class="mono opacity-30 mb-4 text-orange-500 text-xs">
                Quick Links
              </div>
              <nav class="flex flex-col gap-2">
                <a
                  href="index.html"
                  class="serif text-lg hover:text-orange-600 transition-colors"
                  >Home</a
                >
                <a
                  href="index.html#about"
                  class="serif text-lg hover:text-orange-600 transition-colors"
                  >About</a
                >
                <a
                  href="projects.html"
                  class="serif text-lg hover:text-orange-600 transition-colors"
                  >Projects</a
                >
              </nav>
            </div>
            <div>
              <div class="mono opacity-30 mb-4 text-orange-500 text-xs">
                Connect
              </div>
              <nav class="flex flex-col gap-2">
                <a
                  href="https://linkedin.com/in/kumudkode"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="serif text-lg hover:text-orange-600 transition-colors"
                  >LinkedIn</a
                >
                <a
                  href="https://github.com/kumudkode"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="serif text-lg hover:text-orange-600 transition-colors"
                  >GitHub</a
                >
                <a
                  href="mailto:raj94971@gmail.com"
                  class="serif text-lg hover:text-orange-600 transition-colors"
                  >Email</a
                >
              </nav>
            </div>
            <div class="sm:col-span-2 md:col-span-1">
              <div class="mono opacity-30 mb-4 text-orange-500 text-xs">
                Location
              </div>
              <p class="serif text-lg">Noida, UP, India</p>
              <div class="mono opacity-20 mt-8 text-xs flex items-center gap-4">
                <span>Â© 2025 KUMUD RANJAN</span>
                <a
                  href="privacy.html"
                  class="hover:opacity-70 transition-opacity"
                  >Privacy</a
                >
              </div>
            </div>
          </div>
        </div>
      </footer>
    </main>

    <script src="assets/theme.js"></script>
    <script src="assets/projectLoader.js"></script>
    <script>
      // Sound toggle function
      let soundEnabled = true;

      function toggleSound() {
        soundEnabled = !soundEnabled;
        localStorage.setItem("soundEnabled", soundEnabled);
        const toggle = document.querySelector(".sound-toggle");
        if (soundEnabled) {
          toggle.classList.remove("muted");
        } else {
          toggle.classList.add("muted");
        }
      }

      // Load sound preference
      window.addEventListener("load", () => {
        const saved = localStorage.getItem("soundEnabled");
        if (saved !== null) {
          soundEnabled = saved === "true";
          const toggle = document.querySelector(".sound-toggle");
          if (!soundEnabled && toggle) {
            toggle.classList.add("muted");
          }
        }
        // Play welcome sound on page load (desktop only)
        if (window.innerWidth > 768) {
          playSound("interface-sound");
        }
      });

      // Audio functions
      const playSound = (id) => {
        if (!soundEnabled) return;
        const sound = document.getElementById(id);
        if (sound) {
          sound.currentTime = 0;
          sound.play().catch(() => {});
        }
      };

      // Click sound for all clickable elements
      document.addEventListener(
        "click",
        (e) => {
          const target = e.target.closest(
            'a, button, [role="menuitem"], .project-card, .filter-btn'
          );
          if (target) {
            const text = target.textContent.trim();
            const href = target.href || "";

            // Moon sound for theme toggle
            if (target.classList.contains("theme-toggle")) {
              playSound("moon-sound");
            }
            // Sound toggle click
            else if (target.classList.contains("sound-toggle")) {
              playSound("click-sound");
            }
            // Filter button click
            else if (target.classList.contains("filter-btn")) {
              playSound("click-sound");
            }
            // Project card click
            else if (
              target.classList.contains("project-card") ||
              target.closest(".project-card")
            ) {
              playSound("project-sound");
            }
            // Services navigation
            else if (href.includes("services.html")) {
              e.preventDefault();
              playSound("project-sound");
              setTimeout(() => {
                if (href) window.location.href = href;
              }, 500);
            }
            // Default click sound
            else {
              playSound("click-sound");
            }
          }
        },
        true
      );

      // Hover sound for project cards (desktop only)
      document.addEventListener("DOMContentLoaded", () => {
        if (window.innerWidth > 768) {
          document.querySelectorAll(".project-card").forEach((card) => {
            let hoverPlayed = false;
            card.addEventListener("mouseenter", () => {
              if (!hoverPlayed) {
                playSound("hover-sound");
                hoverPlayed = true;
                setTimeout(() => (hoverPlayed = false), 1000);
              }
            });
          });
        }
      });

      // Logo Text Cycling Animation
      const logoCycle = document.getElementById("cycle-logo");
      const words = ["KODE", "CODE", "DEV", "SYSTEM"];
      let wordIndex = 0;

      function cycleText() {
        gsap.to(logoCycle, {
          opacity: 0,
          y: -5,
          duration: 0.3,
          onComplete: () => {
            wordIndex = (wordIndex + 1) % words.length;
            logoCycle.innerText = words[wordIndex];
            gsap.to(logoCycle, {
              opacity: 1,
              y: 0,
              duration: 0.3,
            });
          },
        });
      }
      setInterval(cycleText, 3000);

      // Refined Cursor Animation
      const blob = document.getElementById("cursor-blob");
      const ring = document.getElementById("cursor-ring");
      let mouseX = 0,
        mouseY = 0,
        ringX = 0,
        ringY = 0;

      if (blob && ring && window.innerWidth > 768) {
        window.addEventListener("mousemove", (e) => {
          mouseX = e.clientX;
          mouseY = e.clientY;
          gsap.to(blob, { x: mouseX - 3, y: mouseY - 3, duration: 0.1 });
        });

        const animateRing = () => {
          ringX += (mouseX - ringX - 15) * 0.2;
          ringY += (mouseY - ringY - 15) * 0.2;
          ring.style.transform = `translate3d(${ringX}px, ${ringY}px, 0)`;
          requestAnimationFrame(animateRing);
        };
        animateRing();

        // Cursor hover effects
        document.querySelectorAll("a, button, .project-card").forEach((el) => {
          el.addEventListener("mouseenter", () => {
            gsap.to(ring, { scale: 1.5, duration: 0.3 });
            gsap.to(blob, { scale: 1.5, duration: 0.3 });
          });
          el.addEventListener("mouseleave", () => {
            gsap.to(ring, { scale: 1, duration: 0.3 });
            gsap.to(blob, { scale: 1, duration: 0.3 });
          });
        });
      }

      // Random accent color (matching home page)
      (function () {
        const palettes = [
          ["#ff4d00", "#ff6b2b", "#ff8952"],
          ["#00d4aa", "#00e5bb", "#00f5cc"],
          ["#8b5cf6", "#a78bfa", "#c4b5fd"],
          ["#f59e0b", "#fbbf24", "#fcd34d"],
          ["#ef4444", "#f87171", "#fca5a5"],
          ["#06b6d4", "#22d3ee", "#67e8f9"],
        ];
        const randomPalette =
          palettes[Math.floor(Math.random() * palettes.length)];

        // Update logo color
        const logoElement = document.getElementById("cycle-logo");
        if (logoElement) {
          logoElement.style.color = randomPalette[0];
        }

        // Update CSS accent variable
        document.documentElement.style.setProperty(
          "--accent",
          randomPalette[0]
        );
      })();

      // Visitor Tracking
      (async function trackVisitor() {
        try {
          // Anti-bot checks
          if (navigator.webdriver || window.Cypress || window.__nightmare)
            return;
          if (
            !/Mozilla|Chrome|Safari|Firefox|Edge|Opera/i.test(
              navigator.userAgent
            )
          )
            return;

          // Honeypot delay
          await new Promise((r) => setTimeout(r, 1500));

          const SCRIPT_URL =
            "https://script.google.com/macros/s/AKfycbyXbUb4VdC1WCGeClF3WqRS93ElLfX9H25OEO2YSQlgfmIsKSRsVIdzuhpSxuDuwuiOgA/exec";

          // Generate secure token
          const timestamp = Date.now();
          const SECRET_SALT = "kk_portfolio_2026";
          const rawToken = `${timestamp}_${SECRET_SALT}_${navigator.userAgent.slice(
            0,
            20
          )}`;
          const token = btoa(rawToken).replace(/=/g, "");

          // Session tracking
          const sessionKey = "portfolio_session";
          const visitorKey = "portfolio_visitor_id";
          let sessionId = sessionStorage.getItem(sessionKey);
          if (!sessionId) {
            sessionId =
              "sess_" +
              Date.now() +
              "_" +
              Math.random().toString(36).substr(2, 9);
            sessionStorage.setItem(sessionKey, sessionId);
          }

          // Returning visitor tracking
          let visitorId = localStorage.getItem(visitorKey);
          let isNewVisitor = !visitorId;
          if (!visitorId) {
            visitorId =
              "vis_" +
              Date.now() +
              "_" +
              Math.random().toString(36).substr(2, 9);
            localStorage.setItem(visitorKey, visitorId);
          }
          let visitCount = parseInt(
            localStorage.getItem("portfolio_visit_count") || "0"
          );

          // Rate limiting
          const lastRequest = parseInt(
            sessionStorage.getItem("last_track") || "0"
          );
          if (Date.now() - lastRequest < 5000) return;
          sessionStorage.setItem("last_track", Date.now());

          // UTM parameters
          const urlParams = new URLSearchParams(window.location.search);
          const utm = {
            source: urlParams.get("utm_source") || "",
            medium: urlParams.get("utm_medium") || "",
            campaign: urlParams.get("utm_campaign") || "",
            content: urlParams.get("utm_content") || "",
          };

          function getSource() {
            if (utm.source) return utm.source;
            const ref = document.referrer.toLowerCase();
            if (!ref) return "Direct";
            if (ref.includes("linkedin")) return "LinkedIn";
            if (ref.includes("instagram")) return "Instagram";
            if (ref.includes("twitter") || ref.includes("x.com"))
              return "Twitter/X";
            if (ref.includes("facebook")) return "Facebook";
            if (ref.includes("github")) return "GitHub";
            if (ref.includes("google")) return "Google";
            if (ref.includes("youtube")) return "YouTube";
            try {
              return new URL(ref).hostname;
            } catch (e) {
              return "Other";
            }
          }

          function getBrowser() {
            const ua = navigator.userAgent;
            if (ua.includes("Firefox")) return "Firefox";
            if (ua.includes("Edg")) return "Edge";
            if (ua.includes("Chrome")) return "Chrome";
            if (ua.includes("Safari")) return "Safari";
            if (ua.includes("Opera") || ua.includes("OPR")) return "Opera";
            return "Other";
          }

          const response = await fetch("https://ipapi.co/json/");
          const data = await response.json();

          // Only send if not already tracked this page in session
          const pageKey = "visited_projects";
          if (!sessionStorage.getItem(pageKey)) {
            sessionStorage.setItem(pageKey, "true");

            fetch(SCRIPT_URL, {
              method: "POST",
              mode: "no-cors",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                _token: token,
                _timestamp: timestamp,
                _origin: window.location.hostname,
                sessionId: sessionId,
                visitorId: visitorId,
                isNewVisitor: isNewVisitor,
                visitCount: visitCount,
                ip: data.ip || "Unknown",
                country: data.country_name || "Unknown",
                region: data.region || "Unknown",
                city: data.city || "Unknown",
                postal: data.postal || "Unknown",
                latitude: data.latitude || null,
                longitude: data.longitude || null,
                timezone: data.timezone || "Unknown",
                isp: data.org || "Unknown",
                page: "projects",
                device: /Mobile|Android|iPhone/i.test(navigator.userAgent)
                  ? "Mobile"
                  : "Desktop",
                browser: getBrowser(),
                screenRes: `${screen.width}x${screen.height}`,
                language: navigator.language || "Unknown",
                source: getSource(),
                utmMedium: utm.medium,
                utmCampaign: utm.campaign,
                utmContent: utm.content,
              }),
            });
          }
        } catch (e) {}
      })();
    </script>
  </body>
</html>
